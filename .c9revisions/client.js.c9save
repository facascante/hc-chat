{"ts":1362824136426,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1362829455269,"patch":[[{"diffs":[[1,"module.exports = {\n    \n    getRoom : function(client,gender,fn){\n        client.smembers('hc:rooms',function(err, rooms){\n            if(err){\n                fn(err);\n            }\n            else if(rooms.length > 0){\n                var i=0;\n                rooms.forEach(function(room){\n                    var roomInfo = JSON.stringify(room);\n                    if(roomInfo.visitor.length == 0){\n                        fn(null,roomInfo); return;\n                    }\n                    if(roomInfo.visitor.length == 1 &&  (roomInfo.visitor[0].gender != gender)){\n                        fn(null,roomInfo); return;\n                    }\n                    i++;\n                });\n                if(i == rooms.length){\n                    fn(null,{no:i++,visitor:[]});\n                }\n            }\n            else{\n                fn(null,{no:1,visitor:[]});\n            }\n        });\n    }\n}"]],"start1":0,"start2":0,"length1":0,"length2":908}]],"length":908,"saved":false}
{"ts":1362830710433,"patch":[[{"diffs":[[0,"        });\n"],[1,"    },\n    addVisitor : function(client,room,visitor,fn){\n        client.srem('hc:rooms',room);\n        room.visitor.push(visitor);\n        client.sadd(room);\n"],[0,"    }\n}"]],"start1":1100,"start2":1100,"length1":19,"length2":178}]],"length":1278,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362833971006,"patch":[[{"diffs":[[0,"gify(room);\n"],[1,"                    /*** is room empty ***/\n"],[0,"            "]],"start1":338,"start2":338,"length1":24,"length2":68},{"diffs":[[0,"              }\n"],[1,"                    /*** is room contain 1 visitor and gender is opposite ***/\n"],[0,"                "]],"start1":505,"start2":505,"length1":32,"length2":111},{"diffs":[[0,"        });\n"],[1,"                /*** no more vacant room ***/\n"],[0,"            "]],"start1":803,"start2":803,"length1":24,"length2":70},{"diffs":[[0,"}\n            }\n"],[1,"            /*** no room created yet ***/\n"],[0,"            else"]],"start1":966,"start2":966,"length1":32,"length2":74},{"diffs":[[0,",visitor"],[-1,",fn"],[0,""],[1,""],[0,"){\n     "]],"start1":1156,"start2":1156,"length1":19,"length2":16}]],"length":1275,"saved":false}
{"ts":1362834255565,"patch":[[{"diffs":[[0,"(client,"],[-1,"gend"],[1,"us"],[0,"er,fn){\n"]],"start1":46,"start2":46,"length1":20,"length2":18},{"diffs":[[0,"ength > 0){\n"],[1,"                var isExist = false;\n                rooms.forEach(function(room){\n                    room.visitor.forEach(function(visitor){\n                        if(visitor.username == user.username){\n                            isExist = true;\n                        }\n                    });\n                });\n"],[0,"            "]],"start1":208,"start2":208,"length1":24,"length2":344},{"diffs":[[0,"posite ***/\n"],[-1,""],[0,"            "]],"start1":906,"start2":906,"length1":24,"length2":24},{"diffs":[[0,"nder != "],[1,"user."],[0,"gender))"]],"start1":997,"start2":997,"length1":16,"length2":21}]],"length":1598,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362846205146,"patch":[[{"diffs":[[0,"    "],[-1,"getRoom"],[1,"roomList"],[0," : f"]],"start1":24,"start2":24,"length1":15,"length2":16},{"diffs":[[0,"ent,"],[-1,"user,"],[0,"fn){"]],"start1":51,"start2":51,"length1":13,"length2":8},{"diffs":[[0,"else"],[-1," if(rooms.length > 0){\n                var isExist = false;\n                rooms.forEach(function(room){"],[1,"{\n                fn(null,rooms);\n            }"],[0,"\n   "]],"start1":189,"start2":189,"length1":113,"length2":55},{"diffs":[[0,"    "],[-1,"  "],[1,"});"],[0,"  "],[1,"\n"],[0,"    "],[1,"},\n"],[0,"    "],[-1,"room.visitor.forEach(function(visitor){\n                        if(visitor.username == user.username){\n                            isExist = true;\n                        }\n       "],[1,"getRoom : function(client,user,fn){\n        client.smembers('hc:rooms',function(err, rooms){\n            if(err){\n                fn(err);\n"],[0,"    "]],"start1":245,"start2":245,"length1":200,"length2":164},{"diffs":[[0,"r);\n            "],[-1," });"],[1,"}"],[0,"\n               "]],"start1":401,"start2":401,"length1":36,"length2":33},{"diffs":[[0,"  }\n            "],[-1,"    });"],[1,"else if(rooms.length > 0){"],[0,"\n               "]],"start1":415,"start2":415,"length1":39,"length2":58},{"diffs":[[0,"ength =="],[-1,""],[0,""],[1,"="],[0," 0){\n   "]],"start1":671,"start2":671,"length1":16,"length2":17},{"diffs":[[0,"              }\n"],[1,"                    /*** is user already exist ***/\n                    roomInfo.visitor.forEach(function(visitor){\n                        if(visitor.username == user.username){\n                            fn(null,roomInfo); return;\n                           \n                        }\n                    });\n"],[0,"                "]],"start1":742,"start2":742,"length1":32,"length2":344},{"diffs":[[0,",room,visitor){\n"],[1,"        var isUserExist = false;\n        room.visitor.forEach(function(user){\n            if(user.username == visitor.username){\n                isUserExist = true;\n            }\n        });\n        if(!isUserExist){\n    "],[0,"        client.s"]],"start1":1705,"start2":1705,"length1":32,"length2":253},{"diffs":[[0,"oms',room);\n"],[1,"    "],[0,"        room"]],"start1":1968,"start2":1968,"length1":24,"length2":28},{"diffs":[[0,"isitor);"],[1,"    \n        }"],[0,"\n       "]],"start1":2011,"start2":2011,"length1":16,"length2":30}]],"length":2068,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362857496793,"patch":[[{"diffs":[[0,"sadd(room);\n"],[1,"    },\n    removeVisitor : function(client,room,visitor){\n        for(var user in room.visitor){\n            if(room.visitor[user].username == visitor.username){\n                delete room.visitor[user];\n            }\n        }\n"],[0,"    }\n}"]],"start1":2049,"start2":2049,"length1":19,"length2":248}]],"length":2297,"saved":false}
{"ts":1362857660507,"patch":[[{"diffs":[[0,",room,visitor){\n"],[1,"        client.srem('hc:rooms',room);\n"],[0,"        for(var "]],"start1":2103,"start2":2103,"length1":32,"length2":70},{"diffs":[[0,"}\n        }\n"],[1,"        client.sadd(room);\n"],[0,"    }\n}"]],"start1":2316,"start2":2316,"length1":19,"length2":46}]],"length":2362,"saved":false}
{"ts":1362857749219,"patch":[[{"diffs":[[0,",room,visitor){\n"],[1,"        console.log(\"Removing user\");\n        console.log(room);\n        console.log(visitor);\n"],[0,"        client.s"]],"start1":2103,"start2":2103,"length1":32,"length2":127}]],"length":2457,"saved":false}
{"ts":1362857766672,"patch":[[{"diffs":[[0,",room,visitor){\n"],[1,"        console.log(\"Adding user\");\n        console.log(room);\n        console.log(visitor);\n"],[0,"        var isUs"]],"start1":1705,"start2":1705,"length1":32,"length2":125}]],"length":2550,"saved":false}
{"ts":1362857819244,"patch":[[{"diffs":[[0,"t,user,fn){\n"],[1,"        console.log(\"Getting Rooms and Visitor\");\n        console.log(user);\n"],[0,"        clie"]],"start1":290,"start2":290,"length1":24,"length2":101},{"diffs":[[0,"ength > 0){\n"],[1,"                console.log(rooms);\n"],[0,"            "]],"start1":523,"start2":523,"length1":24,"length2":60}]],"length":2663,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362874391166,"patch":[[{"diffs":[[0,"    client.sadd("],[1,"'hc:rooms',"],[0,"room);\n    },\n  "]],"start1":2244,"start2":2244,"length1":32,"length2":43},{"diffs":[[0,"nt.sadd("],[1,"'hc:rooms',"],[0,"room);\n "]],"start1":2652,"start2":2652,"length1":16,"length2":27}]],"length":2685,"saved":false}
{"ts":1362874539702,"patch":[[{"diffs":[[0,"srem('hc:rooms',"],[1,"JSON.stringify("],[0,"room)"],[1,")"],[0,";\n        for(va"]],"start1":2446,"start2":2446,"length1":37,"length2":53},{"diffs":[[0,"('hc:rooms',"],[1,"JSON.stringify("],[0,"room)"],[1,")"],[0,";\n    }\n}"]],"start1":2675,"start2":2675,"length1":26,"length2":42}]],"length":2717,"saved":false}
{"ts":1362874571612,"patch":[[{"diffs":[[0,"('hc:rooms',"],[1,"JSON.stringify("],[0,"room)"],[1,")"],[0,";\n          "]],"start1":2167,"start2":2167,"length1":29,"length2":45},{"diffs":[[0,":rooms',"],[1,"JSON.stringify("],[0,"room)"],[1,")"],[0,";\n    },"]],"start1":2279,"start2":2279,"length1":21,"length2":37}]],"length":2749,"saved":false}
{"ts":1362875074348,"patch":[[{"diffs":[[0,"fn(null,"],[1,"JSON.parse("],[0,"rooms)"],[1,")"],[0,";\n      "]],"start1":211,"start2":211,"length1":22,"length2":34},{"diffs":[[0,"            "],[-1,"console.log"],[1,"rooms = JSON.parse"],[0,"(rooms);\n   "]],"start1":551,"start2":551,"length1":35,"length2":42},{"diffs":[[0,"mInfo = "],[-1,"JSON.stringify("],[0,"room"],[-1,")"],[0,";\n      "]],"start1":688,"start2":688,"length1":36,"length2":20}]],"length":2752,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362876516974,"patch":[[{"diffs":[[0,"ull,"],[-1,"JSON.parse("],[0,"rooms)"],[-1,")"],[0,";\n  "]],"start1":215,"start2":215,"length1":26,"length2":14}]],"length":2740,"saved":false}
{"ts":1362876579039,"patch":[[{"diffs":[[0,"0){\n"],[-1,"                rooms = JSON.parse(rooms);\n"],[0,"    "]],"start1":531,"start2":531,"length1":51,"length2":8},{"diffs":[[0,"mInfo = "],[1,"JSON.parse("],[0,"room"],[1,")"],[0,";\n      "]],"start1":633,"start2":633,"length1":20,"length2":32}]],"length":2709,"saved":false}
