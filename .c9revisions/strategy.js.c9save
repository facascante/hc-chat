{"ts":1362306162612,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n/*\n * Module dependencies\n */\n\nvar passport = require('passport')\n  , TwitterStrategy = require('passport-twitter').Strategy\n  , FacebookStrategy = require('passport-facebook').Strategy \n  , config = require('./config.json');\n\n/*\n * Auth strategy\n */\n\npassport.serializeUser(function(user, done) {\n  done(null, user);\n});\n\npassport.deserializeUser(function(user, done) {\n  done(null, user);\n});\n\nif(config.auth.twitter.consumerkey.length) {\n  passport.use(new TwitterStrategy({\n      consumerKey: config.auth.twitter.consumerkey,\n      consumerSecret: config.auth.twitter.consumersecret,\n      callbackURL: config.auth.twitter.callback\n    },\n    function(token, tokenSecret, profile, done) {\n      return done(null, profile);\n    }\n  ));\n} \n\nif(config.auth.facebook.clientid.length) {\n  passport.use(new FacebookStrategy({\n      clientID: config.auth.facebook.clientid,\n      clientSecret: config.auth.facebook.clientsecret,\n      callbackURL: config.auth.facebook.callback\n    },\n    function(accessToken, refreshToken, profile, done) {\n      profile.photourl = 'http://graph.facebook.com/'+profile.username+'/picture';\n      return done(null, profile);\n    }\n  ));\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":1171}]],"length":1171}
